[gd_scene load_steps=18 format=3 uid="uid://rvyhsjqw1iee"]

[ext_resource type="Script" uid="uid://b2s3n6cq41yuo" path="res://Scripts/player.gd" id="1_v0iea"]
[ext_resource type="PackedScene" uid="uid://br6r1ixxkcvvy" path="res://Interact/interact_ray.tscn" id="2_6t5aa"]
[ext_resource type="Texture2D" uid="uid://dvvbppbwoj674" path="res://Assets/HUD/baseball_bat.png" id="3_3smsa"]
[ext_resource type="Texture2D" uid="uid://bwu8u0sbrkkp7" path="res://Assets/HUD/knife.png" id="4_8erm5"]
[ext_resource type="Texture2D" uid="uid://chrhya6b6ljf" path="res://Assets/HUD/crosshair.png" id="4_fkybt"]
[ext_resource type="Texture2D" uid="uid://ddbbpom3rdryt" path="res://Assets/HUD/gun.png" id="5_f1ek2"]
[ext_resource type="Texture2D" uid="uid://c4k1uxo6t48hy" path="res://Assets/HUD/vignette.png" id="6_8erm5"]
[ext_resource type="PackedScene" uid="uid://ddyidyxnkh54k" path="res://Scenes/character.tscn" id="9_f1ek2"]
[ext_resource type="AudioStream" uid="uid://dynohfl0vqei6" path="res://Audio/woodsound.mp3" id="9_gymyn"]
[ext_resource type="AudioStream" uid="uid://rtjkf6e7pvy4" path="res://Audio/wood2.mp3" id="10_tx1dd"]

[sub_resource type="LabelSettings" id="LabelSettings_3smsa"]
font_size = 64

[sub_resource type="LabelSettings" id="LabelSettings_8erm5"]
font_size = 64

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_8erm5"]
bg_color = Color(1, 1, 1, 0.2)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_f1ek2"]
bg_color = Color(1, 1, 1, 1)

[sub_resource type="LabelSettings" id="LabelSettings_f1ek2"]
font_size = 32
outline_size = 9
outline_color = Color(0, 0, 0, 1)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_tx1dd"]
radius = 0.3095703
height = 1.8033166

[sub_resource type="AudioStreamPlaylist" id="AudioStreamPlaylist_gymyn"]
shuffle = true
loop = false
stream_count = 2
stream_0 = ExtResource("9_gymyn")
stream_1 = ExtResource("10_tx1dd")

[node name="Player" type="CharacterBody3D"]
process_mode = 3
collision_layer = 2
collision_mask = 5
script = ExtResource("1_v0iea")
animation_blend_easing = 4.0
camera_pitch_min = -60.0
camera_pitch_max = 40.0
camera_bobbing_multiplier = 1.2

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Control" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1

[node name="Crosshair" type="TextureRect" parent="CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -16.0
offset_top = -16.0
offset_right = 16.0
offset_bottom = 16.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("4_fkybt")
stretch_mode = 2

[node name="Baseball_Bat" type="TextureRect" parent="CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -221.0
offset_top = -512.0
offset_right = 35.0
offset_bottom = -256.0
grow_horizontal = 0
grow_vertical = 0
scale = Vector2(0.67, 0.67)
texture = ExtResource("3_3smsa")

[node name="Knife" type="TextureRect" parent="CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -221.0
offset_top = -337.99994
offset_right = 35.0
offset_bottom = -81.99994
grow_horizontal = 0
grow_vertical = 0
scale = Vector2(0.67, 0.67)
texture = ExtResource("4_8erm5")

[node name="Gun" type="TextureRect" parent="CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -221.0
offset_top = -186.0
offset_right = 35.0
offset_bottom = 70.0
grow_horizontal = 0
grow_vertical = 0
scale = Vector2(0.67, 0.67)
texture = ExtResource("5_f1ek2")

[node name="Ammo_Current" type="Label" parent="CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -546.0
offset_top = -139.0
offset_right = -376.0
offset_bottom = -49.0
grow_horizontal = 0
grow_vertical = 0
text = "0"
label_settings = SubResource("LabelSettings_3smsa")
horizontal_alignment = 2
vertical_alignment = 1

[node name="Ammo_Reserve" type="Label" parent="CanvasLayer/Control"]
modulate = Color(1, 1, 1, 0.1)
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -356.0
offset_top = -139.0
offset_right = -186.0
offset_bottom = -43.0
grow_horizontal = 0
grow_vertical = 0
text = "/ 0"
label_settings = SubResource("LabelSettings_8erm5")
vertical_alignment = 1

[node name="Health_Bar" type="ProgressBar" parent="CanvasLayer/Control"]
modulate = Color(0, 0, 0, 1)
layout_mode = 1
offset_left = 47.0
offset_top = 38.0
offset_right = 410.0
offset_bottom = 74.0
theme_override_styles/background = SubResource("StyleBoxFlat_8erm5")
theme_override_styles/fill = SubResource("StyleBoxFlat_f1ek2")
show_percentage = false

[node name="Health_Label" type="Label" parent="CanvasLayer/Control"]
layout_mode = 1
offset_left = 49.0
offset_top = 33.0
offset_right = 412.0
offset_bottom = 78.0
text = "100"
label_settings = SubResource("LabelSettings_f1ek2")
horizontal_alignment = 1
vertical_alignment = 1

[node name="Health_Indicator_Label" type="Label" parent="CanvasLayer/Control"]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
offset_left = 49.0
offset_top = 33.0
offset_right = 412.0
offset_bottom = 78.0
text = "-10"
label_settings = SubResource("LabelSettings_f1ek2")
horizontal_alignment = 1
vertical_alignment = 1

[node name="Flashlight_Prompt_Label" type="Label" parent="CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -158.0
offset_top = -74.0
offset_right = 158.0
offset_bottom = -51.0
grow_horizontal = 2
grow_vertical = 2
text = "Press E to toggle flashlight"
horizontal_alignment = 1
vertical_alignment = 1

[node name="DoorLocked_prompt" type="Label" parent="CanvasLayer/Control"]
custom_minimum_size = Vector2(200, 30)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -100.0
offset_top = -50.0
offset_right = 100.0
offset_bottom = -18.0
grow_horizontal = 2
grow_vertical = 2

[node name="DummyDoor_prompt" type="Label" parent="CanvasLayer/Control"]
custom_minimum_size = Vector2(200, 30)
layout_mode = 0
offset_left = 473.0
offset_top = 350.0
offset_right = 673.0
offset_bottom = 380.0

[node name="ExitAndWin_prompt" type="Label" parent="CanvasLayer/Control"]
custom_minimum_size = Vector2(300, 30)
layout_mode = 0
offset_left = 423.0
offset_top = 281.0
offset_right = 723.0
offset_bottom = 311.0

[node name="Vignette" type="TextureRect" parent="CanvasLayer/Control"]
modulate = Color(1, 0, 0, 0)
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("6_8erm5")

[node name="InteractRay" parent="." instance=ExtResource("2_6t5aa")]
visible = false
collide_with_areas = true
collide_with_bodies = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9002911, 0.037)
shape = SubResource("CapsuleShape3D_tx1dd")

[node name="Head" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6, 0)

[node name="Character" parent="Head" instance=ExtResource("9_f1ek2")]
transform = Transform3D(-1, 0, 8.742278e-08, 0, 1, 0, -8.742278e-08, 0, -1, 0, -1.6, 0.22848535)

[node name="Skeleton3D" parent="Head/Character/Armature" index="0"]
bones/0/position = Vector3(0, 2.1090126, -95.704185)
bones/8/position = Vector3(-1.847744e-06, 14.454562, -1.758337e-05)
bones/9/position = Vector3(1.4305115e-06, 27.39817, -1.6123056e-05)
bones/13/position = Vector3(-0.028795958, 3.2459116, 2.2172928e-05)
bones/14/position = Vector3(0.68180704, 2.4556468, -1.2993813e-05)
bones/16/position = Vector3(0.01782155, 3.4027555, 7.033348e-06)
bones/18/position = Vector3(-0.0066998005, 2.7435863, -1.1742115e-05)
bones/19/position = Vector3(-1.0944446, 10.003369, -0.17452519)
bones/20/position = Vector3(0.018854618, 3.4668775, -2.0727515e-05)
bones/22/position = Vector3(-0.0040593147, 2.927172, 2.2776425e-05)
bones/23/position = Vector3(1.1503813, 10.185297, -0.23173097)
bones/26/position = Vector3(0.016685247, 2.2952101, 3.7521124e-05)
bones/28/position = Vector3(0.0021073818, 2.5700634, 1.6212463e-05)
bones/30/position = Vector3(0.012378216, 1.815947, 2.7060509e-05)
bones/32/position = Vector3(-1.3113022e-06, 14.454557, -3.33488e-05)
bones/34/position = Vector3(1.4305115e-06, 21.326958, -3.993511e-06)
bones/35/position = Vector3(2.9669049, 3.0655212, 1.338771)
bones/36/position = Vector3(0.6240188, 3.5221412, 4.7683716e-06)
bones/37/position = Vector3(-0.17727757, 3.3597016, -3.182888e-05)
bones/38/position = Vector3(-0.44674373, 2.7944717, 1.4901161e-05)
bones/39/position = Vector3(3.6056, 9.873831, 0.1320321)
bones/40/position = Vector3(-0.017495036, 3.2763097, -2.2187829e-05)
bones/41/position = Vector3(0.008559346, 3.084219, 1.347065e-05)
bones/43/position = Vector3(1.00538, 10.212288, -0.3071283)
bones/44/position = Vector3(-0.0117121935, 3.5342903, 1.2144446e-05)
bones/46/position = Vector3(-0.0007123947, 2.8596752, -1.2725592e-05)
bones/47/position = Vector3(-1.1856542, 10.210824, -0.20227802)
bones/51/position = Vector3(-3.4253106, 8.861891, 0.009164631)
bones/52/position = Vector3(-0.011162862, 2.789026, -2.9206276e-05)
bones/54/position = Vector3(-0.00042423606, 2.0947971, -2.0980835e-05)
bones/55/position = Vector3(8.926856, -5.876503, 0.08162366)
bones/56/position = Vector3(2.7846545e-07, 41.070522, 2.0426523e-07)
bones/57/position = Vector3(-1.6223639e-06, 37.689438, 2.9150397e-07)
bones/58/position = Vector3(6.556511e-07, 19.417402, -5.9604645e-07)
bones/59/position = Vector3(6.966293e-07, 7.932381, -8.940697e-08)
bones/62/position = Vector3(1.0095537e-06, 37.718357, 3.17581e-07)
bones/63/position = Vector3(-1.4901161e-08, 19.759895, 7.748604e-07)

[node name="BoneAttachment3D" parent="Head/Character/Armature/Skeleton3D" index="7"]
transform = Transform3D(0.0854137, -0.9938433, 0.07043147, 0.9912841, 0.077644534, -0.106491975, 0.10036667, 0.0789126, 0.9918177, -69.48793, -3.2429104, -142.01585)

[node name="Camera3D" type="Camera3D" parent="Head"]
transform = Transform3D(1, 4.1113555e-08, -1.6994306e-07, 1.0755186e-07, 0.6216811, 0.7832705, 1.378534e-07, -0.7832705, 0.6216811, 0, 0.020413518, 0.139094)
rotation_order = 5
current = true

[node name="SpotLight3D" type="SpotLight3D" parent="Head/Camera3D"]
transform = Transform3D(1, 0, 0, 0, 0.9702956, 0.24192187, 0, -0.24192187, 0.9702956, 0, 0, 0)
light_color = Color(1, 0.91904116, 0.8448446, 1)
light_energy = 2.0
shadow_enabled = true
shadow_bias = 0.2
shadow_opacity = 0.8
spot_range = 10.0

[node name="RayCast3D" type="RayCast3D" parent="Head/Camera3D"]
target_position = Vector3(0, 0, -100)
collision_mask = 5

[node name="AudioStreamPlayer_movement" type="AudioStreamPlayer3D" parent="."]
stream = SubResource("AudioStreamPlaylist_gymyn")
volume_db = -36.953
pitch_scale = 1.41

[node name="AudioStreamPlayer_gun_reload" type="AudioStreamPlayer3D" parent="."]

[node name="AudioStreamPlayer_gunshot" type="AudioStreamPlayer3D" parent="."]

[editable path="Head/Character"]
